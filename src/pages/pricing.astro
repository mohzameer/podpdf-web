---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import PricingTable from '@sections/pricing/PricingTable.astro';
import ComparisonTable from '@sections/pricing/ComparisonTable.astro';
import TrustBadges from '@sections/pricing/TrustBadges.astro';
import FAQSection from '@sections/content/FAQSection.astro';
import CTA from '@sections/marketing/CTA.astro';
import { siteConfig } from '@/config';

const planNames = ['Free Tier', 'Pay As You Go', 'Enterprise'];

const plans = [
  {
    name: 'Free Tier',
    monthlyPrice: 0,
    description: 'Perfect for testing and small projects',
    features: [
      '100 PDFs (lifetime quota, one-time, non-renewable, cumulative)',
      'Web app + API access',
      '20 requests per minute',
      '$0/PDF',
      'HTML, Markdown & Images (subject to conversion type restrictions)',
      'Dashboard & job history (permanent retention)',
      '1 Webhook (maximum webhook configuration)',
      'Upgrade Path (purchase credits to automatically upgrade to paid plan)',
    ],
    highlighted: false,
    cta: { label: 'Start Free', href: 'https://app.podpdf.com/signup' },
  },
  {
    name: 'Pay As You Go',
    monthlyPrice: null,
    customPrice: '$0.01 per PDF',
    description: 'For production use and automation',
    features: [
      'Unlimited PDFs (subject to credit balance)',
      'Web app + Full API access',
      'No rate limits',
      '$0.01 per PDF (credit-based billing, purchase credits upfront)',
      'Credit System (credits deducted after each PDF generation)',
      'Automatic Upgrade (free tier users automatically upgraded when purchasing credits)',
      'HTML, Markdown & Images (subject to conversion type restrictions)',
      '99.9% Uptime SLA (guaranteed availability with SLA credits)',
      'Priority support',
      'Permanent job history retention',
      '5 Webhooks (multiple webhook configurations with event subscriptions)',
      'Webhook Delivery History (permanent retention of delivery records)',
      'Unlimited API keys',
    ],
    highlighted: true,
    cta: { label: 'Get Started', href: 'https://app.podpdf.com/signup' },
  },
  {
    name: 'Enterprise',
    monthlyPrice: null,
    customPrice: '$0.008 per PDF',
    description: 'For high-volume and custom needs',
    features: [
      'Volume discounts',
      'Web app + API access',
      'Dedicated support',
      '99.9% SLA',
      'Custom contracts',
      'Invoice billing (NET-30)',
      'Up to 50 webhook configurations',
    ],
    highlighted: false,
    cta: { label: 'Contact Sales', href: 'https://app.podpdf.com/signup' },
  },
];

const faqs = [
  {
    question: 'Can I use both the web app and API?',
    answer:
      "Yes! Both methods are included in all plans and count toward the same quota. Use the web app for manual conversions and the API for automation—whatever works best for your workflow.",
  },
  {
    question: 'How does the free tier work?',
    answer:
      "You get 100 PDFs for free (lifetime quota, one-time, non-renewable)—use them via the web app, API, or both. Once exhausted, purchase credits to continue and automatically upgrade to the paid plan.",
  },
  {
    question: 'How does credit-based billing work?',
    answer:
      "Paid plans use a credit system. Purchase credits upfront ($0.01 per PDF), and they're deducted after each PDF generation. You must have sufficient credits to generate PDFs. Free credits are consumed before purchased credits.",
  },
  {
    question: 'Can I revert to the free tier after upgrading?',
    answer:
      "No, plan upgrade is permanent. Once you purchase credits and upgrade to the paid plan, you cannot revert to the free tier.",
  },
  {
    question: 'Are there any rate limits?',
    answer:
      'Free tier has 20 API requests/minute. The web app has no rate limits. Paid plans have unlimited API requests.',
  },
  {
    question: 'Do I need coding skills?',
    answer:
      "Not at all! Use our visual web application with drag-and-drop—no coding required. Developers can use our API for automation.",
  },
  {
    question: 'What input formats do you support?',
    answer:
      "Both the web app and API support HTML, Markdown, and images. Note that some plans may have restrictions on which conversion types are enabled—check your plan details.",
  },
  {
    question: 'What happens if I run out of credits?',
    answer:
      "If you have insufficient credits, PDF generation requests will be rejected with an INSUFFICIENT_CREDITS error. Purchase more credits through your dashboard to continue.",
  },
];

const comparisonCategories = [
  {
    name: 'Usage Limits',
    features: [
      { name: 'PDF Quota', values: ['100 (lifetime)', 'Unlimited (credit-based)', 'Unlimited'] },
      { name: 'Billing Model', values: ['Free', 'Credit-based ($0.01/PDF)', 'Credit-based ($0.008/PDF)'] },
      { name: 'Rate Limit', values: ['20 req/min', 'Unlimited', 'Unlimited'] },
      { name: 'API Keys', values: ['5', 'Unlimited', 'Unlimited'] },
    ],
  },
  {
    name: 'Input Formats',
    features: [
      { name: 'HTML to PDF', values: [true, true, true] },
      { name: 'Markdown to PDF', values: [true, true, true] },
      { name: 'Images to PDF', values: [true, true, true] },
      { name: 'Conversion Type Restrictions', values: ['Plan-dependent', 'Plan-dependent', 'Plan-dependent'] },
      { name: 'Content Size Limit', values: ['5 MB', '5 MB', '5 MB'] },
      { name: 'Page Limit', values: ['100', '100', '100+'] },
    ],
  },
  {
    name: 'Features',
    features: [
      { name: 'Dashboard Access', values: [true, true, true] },
      { name: 'Job History', values: ['Permanent', 'Permanent', 'Permanent'] },
      { name: 'Webhooks', values: ['1 webhook', '5 webhooks', 'Up to 50 webhooks'] },
      { name: 'Webhook Events', values: ['Event subscriptions', 'Event subscriptions', 'Event subscriptions'] },
      { name: 'Webhook History', values: [true, true, true] },
    ],
  },
  {
    name: 'Support & SLA',
    features: [
      { name: 'Documentation', values: [true, true, true] },
      { name: 'Email Support', values: ['Best-effort', 'Priority Email', 'Dedicated'] },
      { name: 'Uptime SLA', values: ['Best-effort', '99.9% guaranteed', '99.9% guaranteed'] },
      { name: 'SLA Credits', values: [false, true, true] },
    ],
  },
];
---

<MarketingLayout
  title={`Pricing - ${siteConfig.name}`}
  description="Use our web app or API. Start with 100 free PDFs, then pay only $0.01 per PDF. Same speed for all users. No monthly fees, no hidden costs."
>
  <PricingTable
    title="Simple, transparent pricing"
    subtitle="Use the web app or API—both count toward the same quota. Start with 100 free PDFs, then pay only $0.01 per PDF."
    plans={plans}
    annualDiscount={0}
    defaultPeriod="monthly"
  />

  <TrustBadges
    guarantee={{
      title: 'Start free, scale confidently',
      description:
        'No credit card required to start. Pay only for what you use. Cancel anytime with no penalties.',
    }}
  />

  <ComparisonTable
    title="Compare plans in detail"
    subtitle="See exactly what's included in each plan."
    plans={planNames}
    categories={comparisonCategories}
    highlightedPlan={1}
    background="default"
  />

  <FAQSection
    title="Frequently asked questions"
    faqs={faqs}
    variant="simple"
    background="default"
  />

  <CTA
    title="Need high-volume pricing or custom features?"
    description="Generating thousands of PDFs? Need dedicated support or custom integrations? Let's talk about Enterprise pricing tailored to your needs."
    action={{ label: 'Contact Sales', href: 'https://app.podpdf.com/signup' }}
    background="muted"
  />
</MarketingLayout>
